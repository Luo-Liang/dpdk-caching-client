/*
 * Cluster configuration
 */
#include <stdint.h>
#include <string.h>
#include "cluster-cfg.h"

struct endhost cluster[] = {
    { //e3server1
        .id = 0,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0x87, 0x0c},
        .ip = {0x0a, 0x64, 0x0a, 0x64}
    },

    { // e3server2
        .id = 1,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0x87, 0x0d},
        .ip = {0x0a, 0x64, 0x14, 0x64}
    },

    { // e3server3
        .id = 2,
        .mac = {0x3c, 0xfd, 0xfe, 0xaa, 0xd2, 0x28},
        .ip = {0x0a, 0x64, 0x0a, 0x65}
    },

    { // e3server4
        .id = 3,
        .mac = {0x3c, 0xfd, 0xfe, 0xaa, 0xd2, 0x29},
        .ip = {0x0a, 0x64, 0x14, 0x65}
    },

    { // e3server5
        .id = 4,
        .mac = {0x68, 0x05, 0xca, 0x33, 0x11, 0x3c},
        .ip = {0x0a, 0x64, 0x0a, 0x66}
    },

    { // e3server6
        .id = 5,
        .mac = {0x68, 0x05, 0xca, 0x33, 0xaa, 0x3d},
        .ip = {0x0a, 0x64, 0x14, 0x66}
    },

    { // e3server7
        .id = 6,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0x84, 0x44},
        .ip = {0x0a, 0x64, 0x0a, 0x67}
    },

    { // e3server8
        .id = 7,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0x84, 0x45},
        .ip = {0x0a, 0x64, 0x14, 0x67}
    },

    { // e3server9
        .id = 8,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0x82, 0x00},
        .ip = {0x0a, 0x64, 0x0a, 0x68}
    },

    { // e3server10
        .id = 9,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0x82, 0x01},
        .ip = {0x0a, 0x64, 0x14, 0x68}
    },

    { // e3server11
        .id = 10,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0xfe, 0x0c},
        .ip = {0x0a, 0x64, 0x0a, 0x69}
    },

    { // e3server12
        .id = 11,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0xfe, 0x0d},
        .ip = {0x0a, 0x64, 0x14, 0x69}
    },

    { // dikdik-eth0
        .id = 12,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0x84, 0x8c},
        .ip = {0x0a, 0x64, 0x0a, 0x05}
    },

    { // dikdik-eth1
        .id = 13,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0x84, 0x8d},
        .ip = {0x0a, 0x64, 0x14, 0x05}
    },

    { // fossa-eth0
        .id = 14,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0xfe, 0x04},
        .ip = {0x0a, 0x64, 0x0a, 0x07}
    },

    { // fossa-eth1
        .id = 15,
        .mac = {0x3c, 0xfd, 0xfe, 0xad, 0xfe, 0x05},
        .ip = {0x0a, 0x64, 0x14, 0x05}
    },

    { // guanaco-eth0
        .id = 16,
        .mac = {0x3c, 0xfd, 0xfe, 0xaa, 0xd1, 0xe0},
        .ip = {0x0a, 0x64, 0x0a, 0x08}
    },

    { // guanaco-eth1
        .id = 17,
        .mac = {0x3c, 0xfd, 0xfe, 0xaa, 0xd1, 0xe1},
        .ip = {0x0a, 0x64, 0x14, 0x08}
    },

    { // hippopotamus-eth0
        .id = 18,
        .mac = {0x68, 0x05, 0xca, 0x33, 0x13, 0x42},
        .ip = {0x0a, 0x64, 0x0a, 0x09}
    },

    { // hippopotamus-eth1
        .id = 19,
        .mac = {0x68, 0x05, 0xca, 0x33, 0x13, 0x43},
        .ip = {0x0a, 0x64, 0x14, 0x09}
    },

    { // nyala-eth0
        .id = 20,
        .mac = {0x3c, 0xfd, 0xfe, 0xa1, 0x11, 0x2c},
        .ip = {0x0a, 0x64, 0x0a, 0x0f}
    },

    { // nyala-eth1
        .id = 21,
        .mac = {0x3c, 0xfd, 0xfe, 0xa1, 0x11, 0x2d},
        .ip = {0x0a, 0x64, 0x14, 0x0f}
    },

    { // kudu-eth0
        .id = 22,
        .mac = {0x3c, 0xfd, 0xfe, 0xaa, 0xde, 0xd0},
        .ip = {0x0a, 0x64, 0x0a, 0x0c}
    },

    { // kudu-eth1
        .id = 23,
        .mac = {0x3c, 0xfd, 0xfe, 0xaa, 0xde, 0xd1},
        .ip = {0x0a, 0x64, 0x14, 0x0c}
    },
};

    int
get_endhost_id (struct ether_addr addr)
{
    uint8_t i;

    for (i = 0; i < sizeof(cluster)/sizeof(struct endhost); i++) {
        if (!memcmp(cluster[i].mac, addr.addr_bytes, ETHER_ADDR_LEN)) {
            return cluster[i].id;
        }
    }

    return -1;
}

    struct endhost*
get_endhost (int id)
{
    return &cluster[id];
}
